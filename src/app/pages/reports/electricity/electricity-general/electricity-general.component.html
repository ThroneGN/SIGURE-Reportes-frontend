<div class="wrapper">
  <div class="container">
    <header class="title mb-5" style="margin-top: -15px;">
      <h4>Consumo de electricidad</h4>
    </header>
  </div>

  <!-- <label class="me-2 ms-1" for="fechaIniInput">Fecha Inicio: </label> -->
  <!-- <input id="fechaIniInput" type="text" [(ngModel)]="fechaIni" (input)="updateUrl()" placeholder="Escribe la Fecha Inicio" /> -->

  <!-- <label class="me-2 ms-1" for="fechaFinInput">Fecha Fin: </label> -->
  <!-- <input id="fechaFinInput" type="text" [(ngModel)]="fechaFin" (input)="updateUrl()" placeholder="Escribe la Fecha Fin" /> -->

  <label class="me-2 ms-1" for="">Desde: </label>
  <p-datepicker [iconDisplay]="'input'" [showIcon]="true" inputId="icondisplay" dateFormat="dd/mm/yy"
    [(ngModel)]="startDate" (ngModelChange)="onDateChange()"></p-datepicker>

  <label class="me-2 ms-5" for="">Hasta: </label>
  <p-datepicker [iconDisplay]="'input'" [showIcon]="true" inputId="icondisplay" dateFormat="dd/mm/yy"
    [(ngModel)]="endDate" (ngModelChange)="onDateChange()"></p-datepicker>

  <div class="card mt-4">
    <p-table #ElectricityGeneral selectionMode="single" [value]="listElectricity " dataKey="id" [paginator]="true"
      [rows]="5" [rowsPerPageOptions]="[5, 10, 20, 50]" [loading]="loading" [tableStyle]="{ 'min-width': '50rem' }"
      [globalFilterFields]="['PlanDiario', 'RealDia', 'PlanPicoNocturno', 'RealDiaPicoNoct', 'RealDiaAcum', 'PerdidasDia', 'PerdidasAcum']">

      <ng-template #caption>
        <div class="d-flex align-items-center gap-5" style="position: relative;">
          <div style="position: absolute; top: 0px;">
            <p-iconfield iconPosition="left" class="ml-auto">
              <p-inputicon>
                <i class="pi pi-search"></i>
              </p-inputicon>
              <input pInputText type="text" [(ngModel)]="searchValue"
                (input)="ElectricityGeneral.filterGlobal(searchValue, 'contains')" placeholder="Buscar..." />
                <p-button class="ms-2" type="button" icon="pi pi-refresh" (click)="clear()" text />
            </p-iconfield>
          </div>
        </div>

        <div class="d-flex justify-content-end gap-4 mb-2">
          <p-button icon="pi pi-external-link" label="Exportar a PDF" />
          <p-button icon="pi pi-external-link" label="Exportar a XLS" />
        </div>

      </ng-template>

      <ng-template #header>
        <tr>
          <th pSortableColumn="PlanDiario" style="width:12%">Plan Diario <p-sortIcon field="PlanDiario" /></th>
          <th pSortableColumn="RealDia" style="width:12%">Real Diario <p-sortIcon field="RealDia" /></th>
          <th pSortableColumn="PlanPicoNocturno" style="width:12.5%">Plan Pico Nocturno <p-sortIcon
              field="PlanPicoNocturno" /></th>
          <th pSortableColumn="RealDiaPicoNoct" style="width:15%">Real Diario Pico Nocturno <p-sortIcon
              field="RealDiaPicoNoct" /></th>
          <th pSortableColumn="RealDiaAcum" style="width:12.5%">Real DÃ­a Acumulado <p-sortIcon field="RealDiaAcum" />
          </th>
          <th pSortableColumn="PerdidasDia" style="width:10%">Perdidas Diarias <p-sortIcon field="PerdidasDia" /></th>
          <th pSortableColumn="PerdidasAcum" style="width:12.5%">Perdidas Acumuladas <p-sortIcon field="PerdidasAcum" />
          </th>
        </tr>
      </ng-template>

      <ng-template #body let-electricity>
        <tr>
          <td>{{ electricity.PlanDiario }}</td>
          <td>{{ electricity.RealDia }}</td>
          <td>{{ electricity.PlanPicoNocturno }}</td>
          <td>{{ electricity.RealDiaPicoNoct }}</td>
          <td>{{ electricity.RealDiaAcum }}</td>
          <td>{{ electricity.PerdidasDia }}</td>
          <td>{{ electricity.PerdidasAcum }}</td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td class="text-center" colspan="7" id="sinResultados">No se encuentran resultados.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
